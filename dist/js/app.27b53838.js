(function(e){function t(t){for(var i,s,o=t[0],c=t[1],u=t[2],h=0,d=[];h<o.length;h++)s=o[h],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&d.push(n[s][0]),n[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(t);while(d.length)d.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var e,t=0;t<a.length;t++){for(var r=a[t],i=!0,o=1;o<r.length;o++){var c=r[o];0!==n[c]&&(i=!1)}i&&(a.splice(t--,1),e=s(s.s=r[0]))}return e}var i={},n={app:0},a=[];function s(t){if(i[t])return i[t].exports;var r=i[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=i,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(r,i,function(t){return e[t]}.bind(null,i));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var u=0;u<o.length;u++)t(o[u]);var l=c;a.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"03d3":function(e,t,r){},4944:function(e,t,r){},"4b6a":function(e,t,r){"use strict";r("5903")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var i=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},a=[],s={name:"App",data:function(){return{}},components:{}},o=s,c=(r("5c0b"),r("2877")),u=Object(c["a"])(o,n,a,!1,null,null,null),l=u.exports,h=r("a925"),d=r("95bf"),m=(r("8b78"),r("487a")),p=r.n(m),f=r("8c4f"),v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"page-layout"},[r("div",{staticClass:"header"},[r("h1",{staticClass:"title"},[e._v("Next Movies")]),r("generic-button",{staticClass:"button-big",attrs:{label:"Advanced"},on:{clicked:e.advancedClicked}}),r("autocomplete",{staticClass:"search-movie",attrs:{search:e.searchByText,debounceTime:1e3,placeholder:"Search title or description...","aria-label":"Search title or description..."}})],1),r("div",{staticClass:"left-panel"}),r("div",{staticClass:"movie-list"},[r("movie-list",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],attrs:{movies:e.movies,"infinite-scroll-disabled":"busy","infinite-scroll-distance":"1"},on:{clicked:e.onClickMovie}})],1),r("div",{staticClass:"right-panel"},[r("filter-panel",{directives:[{name:"show",rawName:"v-show",value:e.showAdvancedFilter,expression:"showAdvancedFilter"}],on:{clicked:e.closeAdvancedPanel,filtersApplied:e.filtersApplied}})],1),r("div",{staticClass:"footer"})]),r("router-view")],1)},g=[],C=(r("ac1f"),r("5319"),r("841c"),r("96cf"),r("1da1")),b=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},e._l(e.movies,(function(t){return r("movie",{key:t.id,staticClass:"grow",attrs:{title:t.title,"image-path":t.image},nativeOn:{click:function(r){return e.movieClicked(t)}}})})),1)},y=[],w=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"movieContainer"},[r("img",{attrs:{src:e.imagePath,loading:"lazy"}}),r("h2",{staticClass:"movie-name"},[e._v(e._s(e.title))])])},k=[],x={name:"Movie",props:{title:String,imagePath:String}},$=x,_=(r("ff1d"),Object(c["a"])($,w,k,!1,null,"1d0e4ac7",null)),T=_.exports,M={name:"MovieList",props:{movies:Array},components:{Movie:T},methods:{movieClicked:function(e){this.$emit("clicked",{movie:e})}}},O=M,j=(r("5e94"),Object(c["a"])(O,b,y,!1,null,"3ca7f420",null)),S=j.exports,B=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"filterContainer"},[r("div",{staticClass:"closePanel",on:{click:e.closePanel}},[e._v("X")]),r("p",[e._v("Rating: ")]),r("vue-slider",{attrs:{min:0,max:10},model:{value:e.rating,callback:function(t){e.rating=t},expression:"rating"}}),r("p",[e._v("Movie Length (minutes): ")]),r("vue-slider",{attrs:{min:0,max:240},model:{value:e.runtime,callback:function(t){e.runtime=t},expression:"runtime"}}),r("generic-button",{staticClass:"applyButton",attrs:{label:"Apply"},on:{clicked:e.applyFilters}}),r("generic-button",{staticClass:"clearButton",attrs:{label:"Clear"},on:{clicked:e.clearFilters}})],1)},A=[],P=r("4971"),F=r.n(P),R=(r("24df"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"buttonContainer",on:{click:e.onClick}},[r("div",{staticClass:"buttonLabel"},[e._v(e._s(e.label))])])}),q=[],E={name:"GenericButton",props:{label:String},methods:{onClick:function(){this.$emit("clicked")}}},L=E,z=(r("9dff"),Object(c["a"])(L,R,q,!1,null,"1f161e08",null)),D=z.exports,I={name:"FilterPanel",props:{},data:function(){return{rating:[0,10],runtime:[0,240]}},methods:{closePanel:function(){this.$emit("clicked")},applyFilters:function(){this.$emit("filtersApplied",{rating:this.rating,runtime:this.runtime})},clearFilters:function(){this.rating=[0,10],this.runtime=[0,240],this.$emit("filtersApplied",{rating:this.rating,runtime:this.runtime})}},components:{VueSlider:F.a,GenericButton:D}},N=I,G=(r("b04e"),Object(c["a"])(N,B,A,!1,null,"3535d24c",null)),U=G.exports,H=(r("99af"),r("4de4"),r("caad"),r("fb6a"),r("d3b7"),r("2532"),r("d4ec")),J=r("bee2"),Q=(r("1276"),function(){function e(){Object(H["a"])(this,e)}return Object(J["a"])(e,[{key:"formatTimeToMinutes",value:function(e){var t=e.split("h"),r=t[1].split("m")[0],i=t[0],n=60*i+ +r;return n}}]),e}()),X=new Q,V={pageSize:28,apiUrl:"http://localhost:3000"},K=function(){function e(){Object(H["a"])(this,e)}return Object(J["a"])(e,[{key:"getAllMovies",value:function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(V.apiUrl,"/movies"));case 3:return t=e.sent,e.next=6,t.json();case 6:return r=e.sent,e.abrupt("return",r);case 10:throw e.prev=10,e.t0=e["catch"](0),new Error({id:"getAllMovies",error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));function t(){return e.apply(this,arguments)}return t}()},{key:"getMoviesByCriteria",value:function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t,r,i,n,a){var s,o,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getAllMovies();case 3:return s=e.sent,o=i?s.filter((function(e){return e.title.toLowerCase().includes(i.toLowerCase())||e.synopsis.toLowerCase().includes(i.toLowerCase())})):s,c=o.filter((function(e){return!e.rating||+e.rating>=n[0]&&+e.rating<=n[1]})),u=c.filter((function(e){return!e.runtime||X.formatTimeToMinutes(e.runtime)>=a[0]&&X.formatTimeToMinutes(e.runtime)<=a[1]})),l=u.slice(t,r+1),e.abrupt("return",l);case 11:throw e.prev=11,e.t0=e["catch"](0),new Error({id:"getMoviesByCriteria",error:e.t0});case 14:case"end":return e.stop()}}),e,this,[[0,11]])})));function t(t,r,i,n,a){return e.apply(this,arguments)}return t}()},{key:"getMovieById",value:function(){var e=Object(C["a"])(regeneratorRuntime.mark((function e(t){var r,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat(V.apiUrl,"/movies/").concat(t));case 3:return r=e.sent,e.next=6,r.json();case 6:return i=e.sent,e.abrupt("return",i[0]);case 10:throw e.prev=10,e.t0=e["catch"](0),new Error({id:"getMoviesByCriteria",error:e.t0});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));function t(t){return e.apply(this,arguments)}return t}()}]),e}(),W=new K,Y={name:"NextMovies",props:{},data:function(){return{movies:[],selectedMovie:null,pageSize:V.pageSize,searchCriteria:{searchText:null,rating:[0,10],runtime:[0,600]},showAdvancedFilter:!1,firstTimeAfterPageCreated:!0}},created:function(){var e=this;this.parseRouteQueryParams(),this.searchByCriterias(this.searchCriteria.searchText,this.searchCriteria.rating,this.searchCriteria.runtime),this.$root.bus.$on("goBackClicked",(function(){e.$router.go(-1)}))},methods:{updateSearchCriteriaState:function(e,t,r){this.searchCriteria.searchText=e,this.searchCriteria.rating=t,this.searchCriteria.runtime=r},searchByCriterias:function(e,t,r){var i=this;return Object(C["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return i.updateSearchCriteriaState(e,t,r),n.next=3,W.getMoviesByCriteria(0,i.pageSize,i.searchCriteria.searchText,i.searchCriteria.rating,i.searchCriteria.runtime);case 3:i.movies=n.sent;case 4:case"end":return n.stop()}}),n)})))()},searchByText:function(e){return e||(this.pageSize=V.pageSize),this.searchByCriterias(e,this.searchCriteria.rating,this.searchCriteria.runtime),this.updateRoute(),[]},filtersApplied:function(e){this.searchByCriterias(this.searchCriteria.searchText,e.rating,e.runtime),this.updateRoute()},updateRoute:function(){this.$route.query.search===this.searchCriteria.searchText&&this.$route.query.ratingFrom===this.searchCriteria.rating[0]&&this.$route.query.ratingTo===this.searchCriteria.rating[1]&&this.$route.query.runtimeFrom===this.searchCriteria.runtime[0]&&this.$route.query.runtimeTo===this.searchCriteria.runtime[1]||this.$router.replace({name:"movies",query:{search:this.searchCriteria.searchText,ratingFrom:this.searchCriteria.rating[0],ratingTo:this.searchCriteria.rating[1],runtimeFrom:this.searchCriteria.runtime[0],runtimeTo:this.searchCriteria.runtime[1]}})},parseRouteQueryParams:function(){var e=this.searchCriteria.searchText,t=this.searchCriteria.rating,r=this.searchCriteria.runtime;this.$route.query.ratingFrom&&this.$route.query.ratingTo&&(t=[this.$route.query.ratingFrom,this.$route.query.ratingTo]),this.$route.query.runtimeFrom&&this.$route.query.runtimeTo&&(r=[this.$route.query.runtimeFrom,this.$route.query.runtimeTo]),null!==this.$route.query.search&&void 0!==this.$route.query.search&&(e=this.$route.query.search),this.updateSearchCriteriaState(e,t,r)},loadMore:function(){var e=this;this.pageCreated?this.firstTimeAfterPageCreated=!1:(this.busy=!0,setTimeout((function(){e.pageSize+=V.pageSize,e.searchByCriterias(e.searchCriteria.searchText,e.searchCriteria.rating,e.searchCriteria.runtime),e.busy=!1}),200))},onClickMovie:function(e){this.$router.push({name:"movieDetails",params:{id:e.movie.id}})},closeAdvancedPanel:function(){this.showAdvancedFilter=!1},advancedClicked:function(){this.showAdvancedFilter=!this.showAdvancedFilter}},components:{MovieList:S,FilterPanel:U,GenericButton:D}},Z=Y,ee=(r("770b"),Object(c["a"])(Z,v,g,!1,null,"1984a9aa",null)),te=ee.exports,re=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"overlay"},[r("div",{staticClass:"movie-details-window"},[r("div",{staticClass:"movie-details-container"},[r("div",{staticClass:"image-block"},[r("img",{attrs:{src:e.movie.largeimage,alt:"test image"}})]),r("div",{staticClass:"movie-details"},[r("div",{staticClass:"close-movie-details"},[r("h3",{staticClass:"go-back-button",on:{click:e.goBackClicked}},[e._v("X")])]),r("h2",{staticClass:"movie-name",domProps:{innerHTML:e._s(e.$t(e.movie.title))}}),r("h3",[e._v(e._s(e.releasedRatingRuntime))]),r("p",{staticClass:"synopsis",domProps:{innerHTML:e._s(e.$t(e.movie.synopsis))}}),r("a",{attrs:{target:"_blank",href:"https://www.imdb.com/title/"+e.movie.imdbid+"/"}},[e._v("IMDB")])])])])])},ie=[],ne={name:"MovieDetails",created:function(){var e=this;return Object(C["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,W.getMovieById(e.id);case 3:e.movie=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),console.error("Error: Id: ".concat(t.t0.id,", Exception: ").concat(t.t0.error));case 9:case"end":return t.stop()}}),t,null,[[0,6]])})))()},props:["id"],data:function(){return{movie:{}}},methods:{goBackClicked:function(){this.$root.bus.$emit("goBackClicked")}},computed:{releasedRatingRuntime:function(){var e=this.movie.runtime?" | ".concat(this.movie.runtime):"",t=this.movie.rating?" | ".concat(this.movie.rating):"";return"".concat(this.movie.released).concat(e).concat(t)}}},ae=ne,se=(r("4b6a"),Object(c["a"])(ae,re,ie,!1,null,"c7375c8a",null)),oe=se.exports;i["default"].use(f["a"]);var ce=new f["a"]({routes:[{path:"/",redirect:"/movies"},{path:"/movies",name:"movies",component:te,children:[{path:"/movies/:id",name:"movieDetails",component:oe,props:!0}]}]}),ue=ce;i["default"].config.productionTip=!1;var le=new i["default"]({});i["default"].use(h["a"]),i["default"].use(d["a"]),i["default"].use(p.a);var he=new h["a"]({locale:"en"});new i["default"]({i18n:he,router:ue,data:{bus:le},render:function(e){return e(l)}}).$mount("#app")},"57c1":function(e,t,r){},5903:function(e,t,r){},"5c0b":function(e,t,r){"use strict";r("9c0c")},"5e94":function(e,t,r){"use strict";r("57c1")},"6aff":function(e,t,r){},"770b":function(e,t,r){"use strict";r("03d3")},"79c0":function(e,t,r){},"9c0c":function(e,t,r){},"9dff":function(e,t,r){"use strict";r("6aff")},b04e:function(e,t,r){"use strict";r("4944")},ff1d:function(e,t,r){"use strict";r("79c0")}});
//# sourceMappingURL=app.27b53838.js.map